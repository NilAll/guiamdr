<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia da Cidade</title>
    <style>
        /* Reset e Estilo B√°sico */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        
        body {
            /* Coloque a foto da cidade aqui */
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.8)), url('https://as1.ftcdn.net/jpg/04/82/09/94/1000_F_482099416_EGkmL9vkQGmvy1QlR7gyfm0ZEWsVxPxX.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            height: 100vh;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20vh;
        }

        h1 { margin-bottom: 20px; font-weight: 300; letter-spacing: 2px; text-transform: uppercase; text-align: center; }

        /* Barra de Busca Estilosa */
        .search-box {
            width: 90%;
            max-width: 500px;
            position: relative;
        }
        
        input {
            width: 100%;
            padding: 15px 20px;
            font-size: 18px;
            border-radius: 30px;
            border: none;
            outline: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            background: rgba(255, 255, 255, 0.95);
            transition: 0.3s;
        }
        input:focus { background: white; transform: scale(1.02); }

        /* Lista de Resultados */
        #resultados {
            width: 90%;
            max-width: 500px;
            margin-top: 20px;
            max-height: 50vh;
            overflow-y: auto;
        }

        .item {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            animation: slideUp 0.3s ease;
        }

        .item h3 { font-size: 18px; color: #fff; margin-bottom: 5px; }
        .item p { font-size: 14px; color: #ddd; }
        .tag { 
            display: inline-block; 
            background: #ff9800; 
            color: black; 
            padding: 2px 8px; 
            border-radius: 4px; 
            font-size: 10px; 
            text-transform: uppercase; 
            font-weight: bold;
            margin-top: 5px;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <h1>Guia Comercial</h1>

    <div class="search-box">
        <input type="text" id="busca" placeholder="O que voc√™ procura? (Ex: Pizza, Encanador...)" autocomplete="off">
    </div>

    <div id="resultados"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- COLE SUA CONFIGURA√á√ÉO DO FIREBASE AQUI ---
        const firebaseConfig = {
            apiKey: "AIzaSyDsTWnP2cmsUIDeDlotoR1uELMAba_-dyw",
            authDomain: "testegithub-e1ffb.firebaseapp.com",
            projectId: "testegithub-e1ffb",
            storageBucket: "testegithub-e1ffb.firebasestorage.app",
            messagingSenderId: "508103458559",
            appId: "1:508103458559:web:55bc2fe4dc61d7b5ee16ca"
        };
        // ----------------------------------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Carregar dados na mem√≥ria para busca instant√¢nea
        let todosLocais = [];

        async function carregarDados() {
            const q = query(collection(db, "guia_cidades"), orderBy("nome"));
            const snapshot = await getDocs(q);
            
            todosLocais = [];
            snapshot.forEach(doc => {
                todosLocais.push(doc.data());
            });
            console.log("Dados carregados:", todosLocais.length);
        }

        // Fun√ß√£o de Busca em Tempo Real
        const input = document.getElementById('busca');
        const divResultados = document.getElementById('resultados');

        input.addEventListener('keyup', (e) => {
            const termo = e.target.value.toLowerCase();
            divResultados.innerHTML = ""; // Limpa a tela

            if(termo.length < 2) return; // S√≥ busca se tiver 2 letras ou mais

            // Filtra os locais que cont√©m o termo no nome ou na categoria
            const filtrados = todosLocais.filter(local => 
                local.nomeBusca.includes(termo) || 
                local.categoria.toLowerCase().includes(termo)
            );

            filtrados.forEach(local => {
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `
                    <h3>${local.nome}</h3>
                    <p>üìç ${local.cidade}</p>
                    <p>üìû ${local.contato}</p>
                    <span class="tag">${local.categoria}</span>
                `;
                divResultados.appendChild(div);
            });
        });

        // Inicia o carregamento assim que abre o app
        carregarDados();

    </script>
</body>
</html>