<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Guia da Cidade</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #eee; max-width: 500px; margin: 0 auto; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: #333; }
        input, select, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; }
        button:hover { background: #0056b3; }
        .status { margin-top: 10px; text-align: center; font-weight: bold; }
    </style>
</head>
<body>

    <script>
    const senha = prompt("üîí Digite a senha de administrador:");
    if (senha !== "1234") { // TROQUE "1234" PELA SUA SENHA
        alert("Senha incorreta! Voc√™ ser√° redirecionado.");
        window.location.href = "index.html"; // Manda a pessoa de volta para o Guia
        document.body.innerHTML = "<h1>Acesso Negado</h1>"; // Apaga o conte√∫do da tela
        throw new Error("Acesso negado"); // Para a execu√ß√£o do restante do c√≥digo
    }
    </script>
    <div class="card">
        <h2>üè¢ Cadastrar Local</h2>
        
        <label>Nome do Estabelecimento/Profissional</label>
        <input type="text" id="nome" placeholder="Ex: Padaria Estrela">

        <label>Cidade (Nome - UF)</label>
        <input type="text" id="cidade" placeholder="Ex: Ouro Preto - MG">

        <label>Categoria</label>
        <select id="categoria">
            <option value="Comercio">Com√©rcio</option>
            <option value="Profissionais">Profissionais Liberais</option>
            <option value="Delivery">Delivery</option>
            <option value="Publico">√ìrg√£os P√∫blicos</option>
            <option value="Classificados">Classificados</option>
            <option value="Aluguel">Aluguel</option>
        </select>

        <label>Telefone / WhatsApp</label>
        <input type="text" id="contato" placeholder="(XX) 99999-9999">

        <button id="btnSalvar">Cadastrar no Guia</button>
        <div id="status" class="status"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- COLE SUA CONFIGURA√á√ÉO DO FIREBASE AQUI ---
        const firebaseConfig = {
            apiKey: "AIzaSyDsTWnP2cmsUIDeDlotoR1uELMAba_-dyw",
            authDomain: "testegithub-e1ffb.firebaseapp.com",
            projectId: "testegithub-e1ffb",
            storageBucket: "testegithub-e1ffb.firebasestorage.app",
            messagingSenderId: "508103458559",
            appId: "1:508103458559:web:55bc2fe4dc61d7b5ee16ca"
        };
        // ----------------------------------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.getElementById('btnSalvar').addEventListener('click', async () => {
            const nome = document.getElementById('nome').value;
            const cidade = document.getElementById('cidade').value;
            const categoria = document.getElementById('categoria').value;
            const contato = document.getElementById('contato').value;
            const statusDiv = document.getElementById('status');

            if(!nome || !cidade) {
                alert("Preencha pelo menos Nome e Cidade");
                return;
            }

            statusDiv.textContent = "Salvando...";

            try {
                // Salvamos na cole√ß√£o 'guia_cidades'
                await addDoc(collection(db, "guia_cidades"), {
                    nome: nome,
                    nomeBusca: nome.toLowerCase(), // Ajuda na pesquisa depois
                    cidade: cidade,
                    categoria: categoria,
                    contato: contato,
                    dataCadastro: new Date()
                });
                
                statusDiv.textContent = "‚úÖ Sucesso! Cadastrado.";
                statusDiv.style.color = "green";
                
                // Limpar campos
                document.getElementById('nome').value = "";
                document.getElementById('contato').value = "";
            } catch (e) {
                console.error(e);
                statusDiv.textContent = "‚ùå Erro ao salvar.";
                statusDiv.style.color = "red";
            }
        });
    </script>
</body>
</html>